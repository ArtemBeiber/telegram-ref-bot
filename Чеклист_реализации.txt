═══════════════════════════════════════════════════════════════════════════════
                    ЧЕКЛИСТ РЕАЛИЗАЦИИ РЕФЕРАЛЬНОЙ СИСТЕМЫ
═══════════════════════════════════════════════════════════════════════════════

Дата создания: 2025-01-16
Источник требований: "реферальная Кирилл.txt"

═══════════════════════════════════════════════════════════════════════════════
1. РЕГИСТРАЦИЯ УЧАСТНИКА
═══════════════════════════════════════════════════════════════════════════════

[✓] 1.1. Вход по реферальной ссылке
[✓] 1.2. Вход без реферальной ссылки
[✓] 1.3. Участник сообщает боту свой OzonID
[✓] 1.4. Инструкция, как найти OzonID
[✓] 1.5. Приветственное сообщение после регистрации
[✓] 1.6. Игнорирование повторных попыток подключения

═══════════════════════════════════════════════════════════════════════════════
2. ПРИГЛАШЕНИЕ РЕФЕРАЛОВ
═══════════════════════════════════════════════════════════════════════════════

[✓] 2.1. Запрос реферальной ссылки в любой момент
[ ] 2.2. Список активных реферальных ссылок с датами, товарами и статистикой
[ ] 2.3. Реферальные ссылки на товары

═══════════════════════════════════════════════════════════════════════════════
3. ИНФОРМАЦИЯ О БАЛАНСЕ
═══════════════════════════════════════════════════════════════════════════════

[✓] 3.1. Общая сумма начисленных баллов (не выведенных)
[~] 3.2. Сколько начислено за свои покупки (частично - есть уровень 0, но не отображается отдельно)
[✓] 3.3. Сколько начислено за рефералов 1 уровня
[✓] 3.4. Сколько начислено за рефералов 2 уровня
[✓] 3.5. Сколько начислено за рефералов 3 уровня
[ ] 3.6. Сколько доступно для вывода
[ ] 3.7. Сколько ещё недоступно для вывода

═══════════════════════════════════════════════════════════════════════════════
4. ИНФОРМАЦИЯ О РЕФЕРАЛЬНОЙ СЕТИ
═══════════════════════════════════════════════════════════════════════════════

[✓] 4.1. Команда "Мои рефералы"
[~] 4.2. Список рефералов 1 уровня с деталями (частично - есть статистика, но нет детального списка)
[~] 4.3. Псевдоним в телеграме (частично - хранится в БД, но не отображается)
[~] 4.4. Имя (частично - хранится в БД, но не отображается)
[~] 4.5. Дата приглашения (частично - хранится в БД, но не отображается)
[✓] 4.6. Сколько заказов сделал
[✓] 4.7. На какую сумму
[ ] 4.8. Дата последнего заказа
[~] 4.9. Суммарные данные по уровням 2-3 (частично - есть количество, заказы, сумма, но нет даты последнего заказа)

═══════════════════════════════════════════════════════════════════════════════
5. ЗАПРОС НА ВЫВОД
═══════════════════════════════════════════════════════════════════════════════

[ ] 5.1. Запрос вывода средств при превышении нижнего порога
[ ] 5.2. Инструкция по выводу
[ ] 5.3. Запрос суммы для вывода
[ ] 5.4. Проверка доступности операции
[ ] 5.5. Подтверждение операции
[ ] 5.6. Инициация чата с оператором
[ ] 5.7. Пометка сообщений (оператор/участник)
[ ] 5.8. Управление статусами запросов (новый → согласование → выдано/отказ)
[ ] 5.9. Уведомления об изменении статуса
[ ] 5.10. Учет возвратов (заморозка баллов на срок возврата)

═══════════════════════════════════════════════════════════════════════════════
6. ОБЩЕНИЕ С ТЕХПОДДЕРЖКОЙ
═══════════════════════════════════════════════════════════════════════════════

[✓] 6.1. Кнопка "Нужна помощь"
[ ] 6.2. Чат с отдельным ботом для техподдержки
[ ] 6.3. Переписка с операторами

═══════════════════════════════════════════════════════════════════════════════
7. УВЕДОМЛЕНИЯ
═══════════════════════════════════════════════════════════════════════════════

[ ] 7.1. Включение/выключение уведомлений
[✓] 7.2. Ежедневные/еженедельные уведомления о баллах (ежедневные есть, но без настройки вкл/выкл)
[✓] 7.3. Уведомления о расширении реферальной сети
[~] 7.4. Уведомления о покупках рефералов (частично - есть в ежедневных уведомлениях о бонусах)

═══════════════════════════════════════════════════════════════════════════════
8. АДМИНИСТРАТИВНАЯ ПАНЕЛЬ (ВЕБ-ПРИЛОЖЕНИЕ)
═══════════════════════════════════════════════════════════════════════════════

[ ] 8.1. Веб-приложение с аутентификацией через Telegram
[ ] 8.2. Список участников с фильтрацией и сортировкой
[~] 8.3. Карточка участника с детальной информацией (частично - есть в боте, но нет веб-панели)
[✓] 8.4. Просмотр списка рефералов (в боте)
[~] 8.5. Список начислений и списаний (частично - есть таблица, но нет отображения в веб-панели)
[ ] 8.6. Редактирование данных участника
[ ] 8.7. Журнал операций с изменениями
[ ] 8.8. Список запросов на вывод
[ ] 8.9. Управление статусами запросов на вывод
[ ] 8.10. Журнал действий операторов
[✓] 8.11. Настройки системы (параметры вознаграждения) - в боте
[ ] 8.12. Настройка текстов инструкций
[ ] 8.13. Переключатель: можно ли приглашать тех, кто уже покупал
[ ] 8.14. Параметры вывода (задержка, курс, ограничения)
[ ] 8.15. Параметры подключения к API Ozon (только в .env)
[~] 8.16. Управление списком администраторов (частично - только через .env)
[~] 8.17. Статистика (дерево рефералов, покупки) - частично в боте, но нет экспорта

═══════════════════════════════════════════════════════════════════════════════
9. БЭКЕНД
═══════════════════════════════════════════════════════════════════════════════

[✓] 9.1. Поддержка списков рефералов
[✓] 9.2. Отслеживание статистики по покупкам
[✓] 9.3. Начисление баллов за покупки
[✓] 9.4. Начисление баллов за рефералов
[✓] 9.5. Подробная таблица начислений
[✓] 9.6. Интеграция с API Ozon
[✓] 9.7. Автоматическая синхронизация заказов

═══════════════════════════════════════════════════════════════════════════════
10. ПАРАМЕТРЫ СИСТЕМЫ (ПО ТРЕБОВАНИЯМ)
═══════════════════════════════════════════════════════════════════════════════

[✓] 10.1. Начисление баллов только на 3 уровня (настраивается)
[~] 10.2. Все участники получают 5% от рефералов любого уровня (частично - проценты настраиваются, но по умолчанию разные)
[~] 10.3. Суммарный бонус до 15% (3 уровня × 5%) - зависит от настроек
[ ] 10.4. Условия участия на стартовой странице (настраиваемые)
[ ] 10.5. Можно приглашать только тех, кто никогда не покупал / всех желающих (переключатель)

═══════════════════════════════════════════════════════════════════════════════
ИТОГОВАЯ СТАТИСТИКА
═══════════════════════════════════════════════════════════════════════════════

[✓] Полностью реализовано: 35 пунктов
[~] Частично реализовано: 12 пунктов
[ ] Не реализовано: 38 пунктов

Общий прогресс: ~47% (35 из 85 основных пунктов)

═══════════════════════════════════════════════════════════════════════════════
ПРИОРИТЕТНЫЕ ЗАДАЧИ ДЛЯ ДОРАБОТКИ
═══════════════════════════════════════════════════════════════════════════════

КРИТИЧНЫЕ (для базовой функциональности):
[ ] 1. Система вывода средств - полностью отсутствует
[ ] 2. Система заморозки баллов (учет возвратов, сроки вывода)
[ ] 3. Детальный список рефералов 1 уровня с именами, датами, заказами
[ ] 4. Веб-административная панель - полностью отсутствует

ВАЖНЫЕ (для полноты функциональности):
[ ] 5. Настройка текстов инструкций (сейчас захардкожены)
[ ] 6. Переключатель: можно ли приглашать тех, кто уже покупал
[ ] 7. Система чатов для вывода средств с операторами
[ ] 8. Улучшение отображения статистики (даты последних заказов, детали рефералов)

ДОПОЛНИТЕЛЬНЫЕ (для улучшения UX):
[ ] 9. Настройки уведомлений (включение/выключение)
[ ] 10. Реферальные ссылки на товары (сейчас только общая ссылка)
[ ] 11. Экспорт статистики (дерево рефералов, покупки)

═══════════════════════════════════════════════════════════════════════════════
ЗАМЕТКИ
═══════════════════════════════════════════════════════════════════════════════

- Базовая функциональность реферальной системы реализована хорошо
  (регистрация, начисление бонусов, статистика)

- Основной пробел - система вывода средств (полностью отсутствует)

- Веб-административная панель отсутствует - вся админ-функциональность
  только в Telegram боте

- Много функций реализовано частично - требуют доработки для полного
  соответствия требованиям

═══════════════════════════════════════════════════════════════════════════════
Обозначения:
[✓] - Полностью реализовано
[~] - Частично реализовано
[ ] - Не реализовано
═══════════════════════════════════════════════════════════════════════════════

