Реферальная система
Участники и роли
Система: обеспечивает работу реферальной программы, состоит из нескольких
программных продуктов
Компания: продаёт товары на маркетплейсе Ozon
Покупатель: приобретает или желает приобрести товары Компании
Участник: участвует в реферальной системе. Его пригласили или он сам кого-то
пригласил. Или даже ещё никого не успел пригласить, но уже зарегистрировался сам или
как-то автоматически
Реферал: участник, которого пригласили, он тоже зарегистрировался в системе
Назначение системы
Для Покупателя: Система даёт возможность
● становиться Участником реферальной программы и получать вознаграждение за
покупки товаров Компании
● а также приглашать других Участников, чтобы они стали его Рефералами, тем
самым строить реферальную сеть и получать вознаграждение также за их покупки
Концепция
Участники регистрируются в системе при помощи специального телеграм-бота. Участник
должен сообщить боту свой Ozon ID. После этого они могут создавать реферальные
ссылки и приглашать других участников
По результатам этих действий участнику начисляются баллы, которые он может в любой
момент сконвертировать в фиат и вывести. Для этого участник делает запрос на вывод,
далее система обеспечивает диалог с оператором для согласования способа вывода
вознаграждения. Сама выплата происходит за рамками системы.
Диалог с оператором может быть реализован разными способами, например, такими:
1. Один большой чат, в котором для каждого участника создаётся отдельный топик.
Все операторы видят все топики и могут участвовать во всех обсуждениях
2. Для каждого участника создаётся отдельный чат с оператором
Вопрос к заказчику: какой вариант будет удобнее?
Участник в любой момент может запросить информацию:
● о своей реферальной сети
● об остатке баллов на счёте
Outstream LLC, 01.10.2024
● о количестве баллов, доступных к выводу
Для построения реферальной системы участник будет создавать реферальную ссылку и
приглашать других людей регистрироваться. Другой человек, получая ссылку, попадает в
этого же бота и становится рефералом первого участника, когда нажимает кнопку «/start».
Он, в свою очередь, тоже может создать реферальную ссылку и пригласить ещё кого-то,
таким образом формируя для первого участника уже второй уровень
Каждый уровень даёт участнику определённое количество баллов, например, участник
получает 10 баллов за каждые 1000 рублей, потраченные на уровне 1, 3 балла — на
уровне 2, 1 балл — на уровне 3 и т.д.
На первом этапе:
● делаем просто начисление баллов за рефералов, без дополнительных заданий
● для подключения к системе делаем реферальные ссылки на бота
● на стартовой странице бота должны быть условия участия, текст должен меняться
в настройках системы
● баллы начисляются только на 3 уровня
● все участники получают 5% от рефералов любого уровня, суммарный бонус на
всех уровнях — до 15% (3 уровня × 5%)
● если покупатель уже является участником реферальной системы, все
последующие попытки подключения игнорируются
● если человек просто купил товар вне реферальной программы, он может создавать
свою сеть рефералов
● в рефералы можно приглашать только тех, кто ещё никогда не покупал ничего,
либо всех желающих (нужен переключатель в настройках)
● надо как-то учитывать возвраты (вероятно, у озона есть стандартный срок по
возврату. Сделать возможность вывода баллов после этого срока с момента
заказа.
Например, доступно к выводу 87568 баллов и 256874 баллов в заморозке.)
Компоненты
Система состоит из таких компонентов:
● телеграм-бот (текстовый)
○ позволяет:
○ просматривать инструкцию по работе в системе
○ регистрироваться в системе (в том числе сообщать свой OzonID)
○ видеть списки своих рефералов и их уровни
○ создавать реферальные ссылки
○ смотреть, сколько баллов у него на балансе и сколько из них доступно для
вывода
○ создавать заявки на выплату вознаграждения
○ общаться с оператором по поводу выплаты вознаграждения
○ чат с поддержкой в случае технических проблемы при работе и т.д.
Outstream LLC, 01.10.2024
● веб-приложение администратора
○ позволяет: настраивать параметры вознаграждений (сколько баллов
начисляется за покупку и сколько – за покупки рефералов на всех уровнях)
○ настраивать параметры вывода
■ сколько начисляется денег за 1 балл
■ через какой промежуток времени можно вывести баллы после
начисления
○ настраивать, может ли участник приглашать тех, кто уже ранее что-то
покупал
○ настраивать текст инструкции по работе в системе, отображаемой участнику
○ видеть список заявок на вывод и управлять ими
○ видеть статистику
■ количество участников
■ сумма начисленных/выплаченных бонусов каждому участнику.
■ сумма покупок по каждому участнику, дата последней покупки
участника (или вообще все, что можно взять касательно заказов)
● бэкенд
○ поддерживает списки рефералов
○ отслеживает статистику по покупкам
○ начисляет участникам баллы за покупки и за их рефералов (надо вести
подробную таблицу начислений, чтобы оставалась информация о том,
сколько начислено, когда, за что и т.д.)
○ интегрируется с API Ozon для получения информации о покупках
○
Вопросы к заказчику
● должен ли участник видеть рефералов второго и третьего уровней?
По идее, он их не приглашал напрямую, надо ли ему показывать детальный
список, возможно, стоит показать только их количество
● надо ли ограничивать сумму для вывода (мин, макс)?
Описание функционала
Чат-бот
Регистрация участника
● начало работы: вход по реферальной ссылке
● начало работы: вход без реферальной ссылки
● участник сообщает боту свой OzonID, для этого он должен получить инструкцию с
пояснением, как найти OzonID и как его вводить
● после регистрации система выводит приветственное сообщение
Outstream LLC, 01.10.2024
Приглашение рефералов
● участник может в любой момент запросить у бота свою реферальную ссылку для
приглашения рефералов в бот
● участник может запросить список своих активных реферальных ссылок, бот
выведет список ссылок с датами их выдачи, наименованием товара и статистикой
(сколько людей воспользовались ссылками)
Информация о балансе
● участник может запросить информацию о текущем балансе, в ответ бот присылает
ему данные:
○ общая сумму начисленных баллов (ещё не выведенных)
○ сколько начислено за свои покупки
○ сколько начислено за рефералов 1 уровня
○ сколько начислено за рефералов 2 уровня
○ сколько начислено за рефералов 3 уровня
○ сколько доступно для вывода на текущий момент
○ сколько ещё недоступно для вывода
Информация о реферальной сети
● участник может запросить информацию о состоянии своей реферальной сети по
команде «Мои рефералы»
● система покажет ему список его рефералов первого уровня (тех, кого он приглашал
непосредственно), выводит данные:
○ псевдоним в телеграме (если есть)
○ имя (если есть)
○ дата приглашения
○ сколько заказов сделал
○ на какую сумму
○ дата последнего заказа
● на втором и третьем уровнях вместо подробного списка отображаются суммарные
данные
○ количество
○ сколько заказов
○ на какую сумму
○ дата последнего заказа
Запрос на вывод
● участник может запросить вывод средств, если доступное для вывода количество
баллов больше нижнего порога
● система отображает инструкцию по выводу
● система запрашивает сумму, которую он желает вывести, сообщает, доступна ли
эта операция, и запрашивает подтверждение или выводит сообщение об ошибке
Outstream LLC, 01.10.2024
● если получено подтверждение, система инициирует чат с оператором, сообщения
в чате должны помечаться таким образом, чтобы было видно, кто написал какое
сообщение (оператор или участник)
● оператор видит запрос на вывод в административной панели и переключает
состояние запроса в соответствии с ходом операции (новый → согласование →
выдано успешно / отказ, … набор состояний уточним позже)
● в результате изменения состояния запроса участник получает сообщение об
изменении статуса, видит при этом соответствующую дополнительную
информацию
○ в случае успешного вывода — сообщение о том, сколько выведено, сколько
осталось на балансе
○ в случае ошибки — сообщение об ошибке и о возможных причинах
Общение с техподдержкой
При необходимости участник может обратиться в техподдержку, для этого у него будет
отдельная кнопка «Нужна помощь». При нажатии на неё он попадает в чат с отдельным
ботом, в котором он переписывается с операторами
Уведомления
Участник может включить или выключить регулярное получение сообщений, например,
ежедневно или еженедельно:
● о баллах, начисленных за период
● о расширении своей реферальной сети
● о покупках своих рефералов (только суммарные данные, без подробностей)
Административная панель
Веб-приложение с аутентификацией через телеграм
Список участников
Тут будет список участников, который можно фильтровать и сортировать по реквизитам:
● ID
● имя (никнейм)
● дата регистрации
● текущий баланс
● дата последней покупки
● кол-во рефералов
● сумма покупок
● начислено баллов
● выведено баллов
Outstream LLC, 01.10.2024
Карточка участника
Из списка участников можно открыть карточку участника, где доступна для просмотра
следующая информация
● просмотр списка рефералов
● просмотр информации об участнике
○ когда пришёл
○ когда была последняя покупка, на какую сумму
○ когда был последний вывод, на какую сумму
○ сколько рефералов по уровням
○ на какую сумму купил всего
○ сколько всего начислено баллов
○ сколько всего выведено
○ сколько сейчас на балансе
● список начислений и списаний
○ дата и время
○ начислено (сумма)
○ списано (сумма)
○ операция (например, начислено за покупку или за рефералов 1 уровня,
списано за возврат, списано по причине вывода и т.д.)
Список отсортирован в обратном хронологическом порядке, возможна фильтрация
по всем атрибутам.
И можно редактировать данные участника:
● баланс (раздельно общую сумму и доступную к выводу)
● реферальные связи
● …
Все изменения надо регистрировать в журнале операций с указанием информации об
авторе изменений, времени, старом значении и новом и причины изменений, если она
известна
Запросы на вывод
В этом разделе оператор может видеть список запросов на вывод средств в виде
таблицы. Запросы упорядочены по времени создания по убыванию. Оператор видит
данные запросов:
● кто создал
● когда
● количество баллов
● сумма в валюте (фиат)
● статус (новый → согласование → выдано успешно / отказ, …)
Оператор может открыть каждый запрос, увидеть все основные данные и может
переключать статус запроса. Также может написать комментарий.
Кроме того, оператор может сортировать и фильтровать запросы по всем основным
атрибутам.
Outstream LLC, 01.10.2024
Журнал действий
Тут будет два списка:
1. Список действий операторов, в результате которых были изменения какие-либо
данные участников, например, изменение баланса и т.д.
○ дата и время
○ автор
○ действие (создание, удаление, изменение, блокировка и т.д.)
○ ID объекта
○ название или имя объекта
Список отсортирован в обратном хронологическом порядке, возможна фильтрация
по всем атрибутам.
Для каждой строки можно открыть карточку, где будут выводиться те же атрибуты и
дополнительно ещё и детализация изменений: имя атрибута, старое значение,
новое значение
2. Список начислений и списаний
○ дата и время
○ участник
○ начислено (сумма)
○ списано (сумма)
○ операция (например, начислено за покупку или за рефералов 1 уровня,
списано за возврат, списано по причине вывода и т.д.)
Список отсортирован в обратном хронологическом порядке, возможна фильтрация
по всем атрибутам.
Настройки системы
Тут можно настраивать параметры системы:
● параметры вознаграждения (количество баллов за свои покупки, за покупки
рефералов 1,2 и 3 уровня)
○ количество уровней, которые дают вознаграждения
○ количество баллов на каждом уровне
○ получает ли участник баллы за свои покупки и сколько
● тексты инструкций
○ сообщение при входе
○ инструкция о том, как найти Ozon ID
○ инструкция о выводе средств
○ о создании промокода
○ о создании реферальной ссылки на товар
● переключатель — можно ли приглашать в рефералы тех, кто уже раньше покупал
товары
● параметры вывода
○ длительность задержки перед выводом (через сколько дней можно вывести
баллы после их начисления)
○ ручная корректировка сумм
Outstream LLC, 01.10.2024
○ курс преобразования баллов в фиат
○ ограничения по сумме (мин, макс) (пока не надо)
● параметры подключения к API Ozon
● управление списком администраторов (добавить/удалить/заблокировать)
Статистика
Тут можно будет выгрузить данные
● дерево рефералов
○ имя
○ ID
○ дата
○ кто пригласил
● о покупках по рефералам одним большим списком за период
○ кто
○ ID
○ площадка
○ дата
○ сумма
○ …
Дашборд (пока не делаем)
Общая статистика
● Общее количество пользователей, зарегистрировавшихся в системе
● Общий объем продаж, полученный через реферальную систему
● Общий объём вывода средств
● Количество рефералов, которые не только зарегистрировались, но сделали
первую покупку (абсолютное значение и доля в процентах)
● Количество рефералов, приглашённых участниками
● Среднее время от момента регистрации до первой покупки
● Общее количество ссылок на бота и среднее количество привлечённых с их
помощью рефералов
● Количество рефералов, активных в течение определенного периода времени
(например, за последний месяц).
● Средняя сумма заказа через реферальную систему
● Процент рефералов, которые совершили покупки повторно
● Процент возвратов товаров, купленных через реферальную систему
Все эти параметры — в динамике в виде графиков за последние 12 месяцев
Статистика по рефералам
● Таблица участников с данными о рефералах за заданный период:
○ сколько рефералов он привел всего
Outstream LLC, 01.10.2024
○ сколько из них что-то купили
○ на какую сумму купили рефералы
Рейтинг участников
● Таблицы ТОП-100 участников:
○ по количеству привлечённых рефералов
○ по количеству и сумме покупок всей реферальной сети участника
○ по сумме вывода